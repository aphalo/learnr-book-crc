\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{usingr}[2016/10/20]

\RequirePackage{booktabs}

\RequirePackage{xspace}

%\usepackage{amsmath,amssymb,amsthm}
\RequirePackage{unicode-math}

\RequirePackage{fontspec}
\setmainfont{Lucida Bright OT}
\setsansfont{Lucida Sans OT}
\setmonofont{Lucida Console DK}
\setmathfont{Lucida Bright Math OT}
\linespread{1.07} % increase line spacing as we use in-line math and code

% We set up some other symbol fonts
\newfontfamily\wingdingsfont{Wingdings}
\newcommand\wingdings[1]{{\wingdingsfont\symbol{#1}}}

\newfontfamily\wingdingsfontdos{Wingdings2}
\newcommand\wingdingsdos[1]{{\wingdingsfontdos\symbol{#1}}}

\newfontfamily\wingdingsfonttres{Wingdings3}
\newcommand\wingdingstres[1]{{\wingdingsfonttres\symbol{#1}}}

%\newfontfamily\meteoconsfont{Meteocons}
%\newcommand\meteocons[1]{{\meteoconsfont\symbol{#1}}}
%\newcommand\meteosun{\metecons{"0042}}
%\newcommand\meteosolidsun{\metecons{"0031}}

\newfontfamily\typiconsfont{Typicons}
\newcommand\typicons[1]{{\typiconsfont\symbol{#1}}}
\newcommand\typiadvn{\typicons{"E136}}
\newcommand\typiattn{\typicons{"E04E}}
\newcommand\Attention[1]{\marginpar{\centering\Huge\colorbox{yellow}{\typicons{"E136}}}\index{#1}}
\newcommand\ilAttention{\noindent\colorbox{yellow}{\huge\typicons{"E136}}\xspace}
\newcommand\Advanced[1]{\marginpar{\centering\colorbox{brown}{\Huge\textcolor{white}{\typicons{"E04E}}}}\index{#1}}
\newcommand\ilAdvanced{\noindent\colorbox{white}{\Huge\typicons{"E04E}}\xspace}

\newfontfamily\noticestdfont{Notice2Std}
\newcommand\noticestd[1]{{\noticestdfont\symbol{#1}}}
\newcommand\playicon{\noindent{\huge\textcolor{blue}{\noticestd{"0055}}}\xspace}
\newcommand\advplayicon{\noindent{\huge\colorbox{blue}{\textcolor{white}{\noticestd{"0055}\typicons{"E04E}}}}\xspace}

\newfontfamily\modpictsfont{ModernPictograms}
\newcommand\modpicts[1]{{\modpictsfont\symbol{#1}}}
\newcommand\infoicon{\noindent{\Huge\textcolor{blue}{\modpicts{"003D}}}\xspace}

\newcommand{\langname}[1]{\textsf{#1}\index{#1@\textsf{#1}}\index{languages!#1@\textsf{#1}}\xspace}
\newcommand{\langnameNI}[1]{\textsf{#1}\xspace}
\newcommand{\pgrmname}[1]{\textsf{#1}\index{#1@\textsf{#1}}\index{programmes!#1@\textsf{#1}}\xspace}
\newcommand{\pgrmnameNI}[1]{\textsf{#1}\xspace}
\newcommand{\pgrmnameTwo}[2]{\textsf{#1}\index{#2@\textsf{#1}}\index{programmes!#2@\textsf{#1}}\xspace}
\newcommand{\pkgname}[1]{`\textsf{#1}'\index{#1@\textsf{`#1'}}\index{packages!#1@\textsf{`#1'}}\xspace}
\newcommand{\pkgnameNI}[1]{`\textsf{#1}'\xspace}
\newcommand{\osname}[1]{\textsf{#1}\index{#1@\textsf{#1}}\index{operating systems!#1@\textsf{#1}}\xspace}
\newcommand{\osnameNI}[1]{\textsf{#1}\xspace}

\newcommand{\ggplot}{\pkgname{ggplot2}}
\newcommand{\ggspectra}{\pkgname{ggspectra}}
\newcommand{\ggmap}{\pkgname{ggmap}}
\newcommand{\ggtern}{\pkgname{ggtern}}
\newcommand{\ggrepel}{\pkgname{ggrepel}}
\newcommand{\ggsignif}{\pkgname{ggsignif}}
\newcommand{\ggpmisc}{\pkgname{ggpmisc}}
\newcommand{\cowplot}{\pkgname{cowplot}}
\newcommand{\scales}{\pkgname{scales}}
\newcommand{\plyr}{\pkgname{plyr}}
\newcommand{\dplyr}{\pkgname{dplyr}}
\newcommand{\tydyr}{\pkgname{tidyr}}
\newcommand{\readr}{\pkgname{readr}}
\newcommand{\xts}{\pkgname{xts}}
\newcommand{\Hmisc}{\pkgname{Hmisc}}
\newcommand{\viridis}{\pkgname{viridis}}

\newcommand{\R}{\textsf{R}}
%\newcommand{\Rpgrm}{\pgrmname{R}}
\newcommand{\Rpgrm}{\textsf{R}\xspace} % does not create index entry
%\newcommand{\Rlang}{\langname{R}} % creates index entry
\newcommand{\Rlang}{\textsf{R}\xspace} % does not create index entry
\newcommand{\RStudio}{\pgrmname{RStudio}}
\newcommand{\Slang}{\langname{S}}
\newcommand{\Splang}{\langname{S-Plus}}

\newcommand{\Clang}{\langname{C}}
\newcommand{\Cpplang}{\langname{C++}}
\newcommand{\javalang}{\langname{Java}}
\newcommand{\pythonlang}{\langname{Python}}

% text and index entry
\newcommand{\Rclass}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{classes and modes!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\Rfunction}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{functions and methods!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\Rmethod}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{functions and methods!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\Roperator}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{operators!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\Rloop}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{control of execution!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\Rcontrol}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{control of execution!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\Rconst}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{constant and special values!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\Rscoping}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{names and their scope!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\Rdata}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{data objects!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}

% only index entry "quiet version" to create index entries for code chunks
\newcommand{\qRclass}[1]{\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{classes and modes!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\qRfunction}[1]{\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{functions and methods!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\qRmethod}[1]{\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{functions and methods!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\qRoperator}[1]{\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{operators!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\qRloop}[1]{\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{control of execution!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\qRcontrol}[1]{\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{control of execution!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\qRconst}[1]{\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{constant and special values!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\qRscoping}[1]{\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{names and their scope!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}

\newcommand{\gggeom}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{functions and methods!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\ggstat}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{functions and methods!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\ggtheme}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{functions and methods!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\ggscale}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{functions and methods!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}
\newcommand{\ggcoordinate}[1]{\code{#1}\index[rindex]{#1@\texttt{#1}}\index[rcatsidx]{functions and methods!#1@\texttt{#1}}\index[cloudindex]{#1}\xspace}

%\newcommand{\gggeom}[1]{\code{#1}\index{plots!geometries!#1@\texttt{#1}}\xspace}
%\newcommand{\ggstat}[1]{\code{#1}\index{plots!statistics!#1@\texttt{#1}}\xspace}
%\newcommand{\ggtheme}[1]{\code{#1}\index{plots!themes!#1@\texttt{#1}}\xspace}
%\newcommand{\ggscale}[1]{\code{#1}\index{plots!scales!#1@\texttt{#1}}\xspace}
%\newcommand{\ggcoordinate}[1]{\code{#1}\index{plots!coordinates!#1@\texttt{#1}}\xspace}

\definecolor{codeshadecolor}{rgb}{0.93, 0.93, 0.93}
\newcommand{\code}[1]{\texttt{\addfontfeature{Scale = 0.89}{\setlength{\fboxsep}{0.05pt}\colorbox{codeshadecolor}{#1\vphantom{tp}}}}}

% at the moment using `shaded' and code chunks in same box results in the last text paragraph being discarded.
% this is most likely because knitr uses the same environment and we then end with a shaded environment
% nested within another one.

\newenvironment{playground}[1]{\begin{oframed}\playicon\ #1}{\end{oframed}}

\newenvironment{advplayground}[1]{\begin{oframed}\advplayicon\ #1}{\end{oframed}}

\newenvironment{warningbox}[1]{\begin{oframed}\ilAttention\ #1}{\end{oframed}}

\newenvironment{explainbox}[1]{\begin{oframed}\ilAdvanced\ #1}{\end{oframed}}

\newenvironment{infobox}[1]{\begin{oframed}\infoicon\ #1}{\end{oframed}}

\newcommand{\citebooktitle}[1]{\citetitle{#1}}
%\newcommand{\citebooktitle}[1]{\emph{\citetitle{#1}}}
